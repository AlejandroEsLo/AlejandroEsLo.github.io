<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Primeros Pasos</title>
    <meta name="description" content="Comenzamos">
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component@1.1.0/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>


    <!-- Componente que usaremos para mover los paquetes de clientes a servidor
    <script>
        let Lista_Paquetes = ["P_SYN", "P_ACK", "ACK_SYN_ACK", "DATOS", "ACK_DATOS","FIN", "ACK_FIN"]

        AFRAME.registerComponent('cursor-changeposition', {
            init: function () {
                this.el.addEventListener('click', () => {
                    this.el.setAttribute('animation', 'property:position; to:1.75 1.85 -4; dur:5000')
                    this.el.setAttribute('material', 'color', 'green')
                })
            }
        })

    </script>-->
    <script>
    AFRAME.registerComponent('change-color-position', {
      schema: {
        color: {default: 'red'},
        position: {origen: 'x: 1.75, y: 1.85, z: -4'}
      },

      init: function () {
        var data = this.data;
        var el = this.el;  // <a-box>
        var defaultColor = el.getAttribute('material').color;
        var posDestino = el.getAttribute('position');

        el.addEventListener('mouseenter', function () {
          el.setAttribute('color', data.color);
        });

        el.addEventListener('mouseleave', function () {
          el.setAttribute('color', defaultColor);
        });

        el.addEventListener('click', function () {
          el.setAttribute('animation', 'property:position; to:1.75 1.85 -4; dur:5000');//'position',data.position
          el.setAttribute('material', 'color', 'green');
        });

      }
    });
  </script>

  </head>
  <body>
    <a-scene background="color: #FAFAFA">
      <!-- Creamos entorno para nuestra escena -->
      <a-entity environment="preset: starry"></a-entity>
      <a-entity light="type: ambient; color: #FFF"></a-entity>

      <!-- Ordenador Cliente -->
      <a-gltf-model id = "Cliente"
        src="gaming_laptop/scene.gltf"
        position="-3 0.5 -4"
        scale="0.5 0.5 0.5"
        rotation="0 -90 0">
      </a-gltf-model>

      <!-- Ordenador Servidor -->
      <a-gltf-model id = "Servidor"
        src="gaming_laptop/scene.gltf"
        position="3 0.5 -4"
        scale="0.5 0.5 0.5"
        rotation="0 -90 0">
      </a-gltf-model>

      <a-entity cursor="rayOrigin: mouse"></a-entity>
      <!--

      <a-entity geometry="primitive: sphere" material="color:blue" position="-1.75 4 -4" scale="0.25 0.25 0.25"
                  event-set__enter="_event: mouseenter; _target: #P_SYN; color: green"
                  event-set__enter2="_event: mouseenter; _target: #P_ACK; color: white"
                  event-set__click="_event: click; _target: #P_SYN; _delay: 5000;position: 2.25 1.85 -4"
                  event-set__click2="_event: click; _target: #P_ACK; _delay: 5000;position: -2.25 1.85 -4"
                  animation__position="_target: #P_SYN ;property:position; to: 2 4 -4; dur:5000; startEvents:click;"
      ></a-entity>
    -->

      <!-- Paquetes a enviar -->
      <a-box id = "P_SYN"change-color-position="position:1.75 1.85 -4" material="color:yellow" position="-1.75 1.85 -4" scale="0.1 0.1 0.1" >
      </a-box>

      <a-entity id = "action_button" change-color-position geometry="primitive: sphere" material="color:blue" starter="packet: P" position="-1.75 4 -4" scale="0.25 0.25 0.25"></a-entity>

<!--
      <a-box
          id = "P_ACK"
          material="color:#FF2D00"
          position="1.75 1.85 -4"
          scale="0.1 0.1 0.1;">
      </a-box>

      <script>

          action_button.addEventListener("click", click_button);

          function click_button() {
          	var P1 = document.querySelector("P_SYN");
            P1.setAttribute('animation', 'property:position; to:1.75 1.85 -4; dur:5000');
            P1.setAttribute('material', 'color', 'green');
          }

      </script>


      <a-entity id = "action_button" cursor-changeposition geometry="primitive: sphere" material="color:blue" starter="packet: P" position="-1.75 4 -4" scale="0.25 0.25 0.25"></a-entity>

            <a-entity id="P" packet="start: 0; end: 20;" from="Cliente"; to="Servidor"></a-entity>
            <a-box id = "SYN_ACK" color="yellow" position="1.75 1.85 -4" scale="0.1 0.1 0.1"
                    packet="start: 0; end: 5000;" from="Servidor"; to="Cliente"shadow></a-box>
      -->


  <!--
      <a-box id = "ACK_SYN_ACK" color="yellow" position="-1.75 1.85 -4" scale="0.1 0.1 0.1" shadow></a-box>

      <a-box id = "DATOS" color="blie" position="-1.75 1.85 -4" scale="0.1 0.1 0.1" shadow></a-box>

      <a-box id = "ACK_DATOS" color="blue" position="1.75 1.85 -4" scale="0.1 0.1 0.1" shadow></a-box>

      <a-box id = "FIN" color="red" position="-1.75 1.85 -4" scale="0.1 0.1 0.1" shadow></a-box>

      <a-box id = "ACK_FIN" color="red" position="1.75 1.85 -4" scale="0.1 0.1 0.1" shadow></a-box>

      console.table(SYN);
-->
    </a-scene>
  </body>
</html>
